<robot name = 'door_test' xmlns:xacro="http://ros.org/wiki/xacro">
    <!-- <link name = 'world'/> -->
    
    <!-- <joint name = 'world2base' type = 'fixed'>
        <parent link = 'world'/>
        <child link = 'base_link'/>
    </joint> -->

    <link name = 'base_link'/>
        
    <joint name = 'base_joint' type = 'fixed'>
        <parent link = 'base_link'/>
        <origin xyz = '0 0.5 0.0' rpy='0 0 3.14159'/>
        <!-- if move y : the door will slide -->
        <child link = 'door_wall'/>
    </joint>

    <link name = 'door_wall'>
        <visual>
            <geometry>
                <box size='0.08 1.5 2.04'/>
            </geometry>
            <origin xyz = '0 -0.67 1.02' rpy = '0 0 0'/>
        </visual>
        <visual>
            <geometry>
                <box size='0.08 1.5 2.04'/>
            </geometry>
            <origin xyz = '0 1.74 1.02' rpy = '0 0 0'/>
        </visual>
        <visual>
            <geometry>
                <box size='0.08 3.91 0.3'/>
            </geometry>
            <origin xyz = '0 0.532 2.19' rpy = '0 0 0'/>
        </visual>

        <collision name="side_1_:hinge_side">
            <geometry>
                <box size='0.08 1.5 2.04'/>
            </geometry>
            <origin xyz = '0 -0.67 1.02' rpy = '0 0 0'/>
        </collision>
        <collision name="side_2">
            <geometry>
                <box size = '0.05029 0.06858 2.10820'/>
            </geometry>
            <origin xyz="-0.02 1.02 1.05" rpy="0 0 0"/>
        </collision>
        <collision>
            <geometry>
                <box size='0.08 1.5 2.04'/>
            </geometry>
            <origin xyz = '0 1.8 1.02' rpy = '0 0 0'/>
        </collision>
        <collision name="top">
            <geometry>
                <box size='0.08 3.91 0.3'/>
            </geometry>
            <origin xyz = '0 0.532 2.19' rpy = '0 0 0'/>
        </collision>
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="10000.0"/>
            <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
        </inertial>
    </link>

    <joint name = 'door_hinge' type = 'revolute'>
        <axis xyz = '0 0 1' rpy = '0 0 0 '/>
        <origin xyz = '-0.07 0.06858 2.040'/>
        <limit lower = '0' upper = '1.57' effort='10000' velocity="100.00"/>
        <dynamics damping="25.0" friction="0.0"/>
        <parent link = 'door_wall'/>
        <child link = 'door'/>
    </joint>

    <link name = 'door'>
        <visual>
            <geometry>
                <mesh filename = './meshes/door.dae'/>
            </geometry>
            <origin xyz = '-0.05 0 0' rpy = '-1.57 0 1.57'/>
            <color rgba = '0.5 0.5 0.5 1.0'/>
        </visual>
        <visual>
            <geometry>
                <mesh filename = './meshes/v5_plate.dae' scale='0.04 0.04 0.04'/>
            </geometry>
            <origin xyz = '0.03 0.75 -1.02' rpy = '-1.57 0 3.14159'/>
            <color rgba = '0.5 0.5 0.5 1.0'/>
        </visual>
        <collision name="door_collision">
            <geometry>
                <mesh filename = './meshes/door.dae'/>
            </geometry>
            <origin xyz = '-0.05 0 0' rpy = '-1.57 0 1.57'/>
        </collision>
        <inertial>
            <origin xyz="0.4569 0.0349 1.016" rpy="0 0 0"/>
            <mass value="41.3256"/>
            <inertia ixx="14.2053" ixy="0.0004" ixz="0.0000" iyy="17.1997" iyz="0.0000" izz="3.0298"/>
        </inertial>
    </link>

    <joint name = 'door_handle' type = 'revolute'>
        <axis xyz = '1 0 0' rpy = '0 0 0 '/>
        <parent link = 'door'/>
        <origin xyz = '0.035 0.75 -1.02'/>
        <limit lower = '0' upper = '0.5236' effort='100' velocity="1000.00"/>
        <dynamics damping="0.01" friction="0.0"/>
        <child link = 'door_handles'/>
    </joint>

    <link name = 'door_handles'>
        <visual>
            <geometry>
                <mesh filename = './meshes/v5_handle.dae' scale='0.04 0.04 0.04'/>
            </geometry>
            <origin xyz = '-0.0025 0 0' rpy = '-1.57 3.141592 0'/>
            <color rgba = '0.55 0.5 0.5 1.0'/>
        </visual>
        <!-- <visual>
            <geometry>
                <mesh filename = './meshes/with_plate.dae' scale='0.04 0.04 0.04'/>
            </geometry>
            <origin xyz = '0.04 0 0' rpy = '0 0 -1.57'/>
             <color rgba = '0.5 0.5 0.5 1.0'/>
        </visual> -->
        <collision name="door_handles_collision">
            <geometry>
                <mesh filename="./meshes/v5.stl" scale='0.04 0.04 0.04'/>
            </geometry>
            <origin xyz = '-0.0025 0 0' rpy = '-3.14159 3.141592 0'/>
        </collision>
        <!-- <collision name="door_handles_collision">
            <geometry>
                <mesh filename="./meshes/with_plate_collision.dae" scale='0.04 0.04 0.04'/>
            </geometry>
            <origin xyz = '0.045 0 0' rpy = '0 0 -1.57'/>
        </collision> -->
        <inertial>
            <origin xyz="0.0 0.0 0.0" rpy="3.14159 0 1.57"/>
            <mass value="1.0"/>
            <!-- <inertia ixx="14.2053" ixy="0.0004" ixz="0.0000" iyy="17.1997" iyz="0.0000" izz="3.0298"/> -->
        </inertial>
    </link>
    
    <joint name = 'handle2latch' type = 'fixed'>
        <parent link = 'door_handles'/>
        <child link = 'door_latch'/>
    </joint>

    <link name='door_latch'>
        <collision>
            <geometry>
                <box size='0.001 0.14 0.01'/>
            </geometry>
            <origin xyz = '0.043 0.1 0' rpy = '0 0 0'/>
        </collision>
    </link>
    <!-- <gazebo reference="world">
        <material>Gazebo/Red</material>
    </gazebo> -->

</robot>
